{"name":"Werkzeug + Unix sockets","tagline":"Monkey-patching Werkzeug WSGI server to use Unix sockets instead of TCP sockets.","body":"## Why?\r\n\r\nBecause I was tired of having to deal with looking for free TCP ports for my\r\nFlask development servers. Using Unix sockets is much simpler and fun.\r\n\r\n## How?\r\n\r\nHere's a quick guide to using Werkzeug + Unix sockets in a Flask app.\r\n\r\nFirst, install the module:\r\n\r\n```bash\r\n$ pip install git+git://github.com/tomekwojcik/werkzeug_plus_unix_sockets.git\r\n```\r\n\r\nThen, adapt your app to use it:\r\n\r\n```python\r\nfrom flask import Flask\r\n\r\napp = Flask(__name__)\r\n\r\n\r\n@app.route('/')\r\ndef app_index():\r\n    return 'Hello, World!'\r\n\r\nif __name__ == '__main__':\r\n    app.debug = True\r\n\r\n    try:\r\n        from werkzeug_unix_sock import patch_werkzeug\r\n    except ImportError:\r\n        app.run() # Falling back to TCP socket.\r\n    else:\r\n        patch_werkzeug()\r\n        app.run('/tmp/unix_sock_demo.app.sock') # Using Unix socket.\r\n```\r\n\r\nFinally, you'll have to adapt your nginx config:\r\n\r\n```Nginx\r\nserver {\r\n    server_name unix_sock_demo.app;\r\n    listen      127.0.0.1:80;\r\n\r\n    location / {\r\n        proxy_pass  http://unix:/tmp/unix_sock_demo.app.sock:;\r\n        proxy_set_header Host $host;\r\n    }\r\n}\r\n```\r\n\r\nRestart nginx, start your app and test it:\r\n\r\n```bash\r\nbilbo ~ $ http -v GET http://unix_sock_demo.app/\r\nGET / HTTP/1.1\r\nAccept: */*\r\nAccept-Encoding: gzip, deflate, compress\r\nHost: unix_sock_demo.app\r\nUser-Agent: HTTPie/0.7.2\r\n\r\n\r\n\r\nHTTP/1.1 200 OK\r\nConnection: keep-alive\r\nContent-Length: 13\r\nContent-Type: text/html; charset=utf-8\r\nDate: Sun, 05 Jan 2014 12:49:30 GMT\r\nServer: nginx/1.4.2\r\n\r\nHello, World!\r\n```\r\n\r\n## Will it work with my Flask app?\r\n\r\nIt works with mine Flask apps, so it should work with yours, too. I can't\r\nguarantee anything, though. I tested it with a few Flask apps of\r\nmine, each one using ``Werkzeug==0.9.4``.\r\n\r\nSince this is an ugly hack all I can say that your mileage may vary.\r\n\r\n## Anything else?\r\n\r\nThis hack was done by [Tomek WÃ³jcik](http://www.bthlabs.pl/). Since it\r\nborrows code from Werkzeug, it's licensed under the BSD license.","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}